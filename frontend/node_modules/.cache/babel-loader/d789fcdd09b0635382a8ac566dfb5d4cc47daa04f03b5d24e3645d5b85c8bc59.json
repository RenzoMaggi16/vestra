{"ast":null,"code":"import React,{useEffect,useRef}from'react';import Chart from'chart.js/auto';import'./Chart.css';import{jsx as _jsx}from\"react/jsx-runtime\";const PortfolioChart=_ref=>{let{data,selectedAsset,timeFilter}=_ref;const chartRef=useRef(null);const chartInstance=useRef(null);useEffect(()=>{if(!data||!data.dates||!data.values||data.dates.length===0){return;}// Destroy previous chart if it exists\nif(chartInstance.current){chartInstance.current.destroy();}const ctx=chartRef.current.getContext('2d');// Filter data based on time filter\nlet filteredDates=[...data.dates];let filteredValues=[...data.values];if(timeFilter==='1h'){// For demo, just take the last 24 points and pretend they're hourly\nfilteredDates=filteredDates.slice(-24);filteredValues=filteredValues.slice(-24);}else if(timeFilter==='3h'){// For demo, take the last 36 points\nfilteredDates=filteredDates.slice(-36);filteredValues=filteredValues.slice(-36);}else if(timeFilter==='1d'){// For demo, take the last 48 points\nfilteredDates=filteredDates.slice(-48);filteredValues=filteredValues.slice(-48);}else if(timeFilter==='1w'){// For demo, take all points but sample every 4th one\nfilteredDates=filteredDates.filter((_,i)=>i%4===0);filteredValues=filteredValues.filter((_,i)=>i%4===0);}// For 1m, use all data\n// Create gradient for the line\nconst gradient=ctx.createLinearGradient(0,0,0,300);gradient.addColorStop(0,'rgba(248, 227, 107, 0.5)');gradient.addColorStop(1,'rgba(248, 227, 107, 0)');// Siempre mostrar el balance total del portafolio, ignorando el activo seleccionado\nconst chartLabel='Balance Total del Portafolio';// Create the chart\nchartInstance.current=new Chart(ctx,{type:'line',data:{labels:filteredDates,datasets:[{label:chartLabel,data:filteredValues,borderColor:'#f8e36b',backgroundColor:gradient,borderWidth:2,pointRadius:0,pointHoverRadius:5,pointHoverBackgroundColor:'#f8e36b',pointHoverBorderColor:'#fff',pointHoverBorderWidth:2,tension:0.4,fill:true}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false},tooltip:{mode:'index',intersect:false,backgroundColor:'#111',titleColor:'#f8e36b',bodyColor:'#fff',borderColor:'#333',borderWidth:1,padding:10,displayColors:false,callbacks:{label:function(context){return\"$\".concat(context.parsed.y.toFixed(2));}}}},scales:{x:{grid:{display:false,drawBorder:false},ticks:{display:false}},y:{grid:{color:'#222',drawBorder:false},ticks:{color:'#888',padding:10,callback:function(value){return value>=1000?\"\".concat(value/1000,\"k\"):value;}}}},interaction:{mode:'nearest',axis:'x',intersect:false}}});return()=>{if(chartInstance.current){chartInstance.current.destroy();}};},[data,selectedAsset,timeFilter]);return/*#__PURE__*/_jsx(\"div\",{className:\"chart-wrapper\",children:/*#__PURE__*/_jsx(\"canvas\",{ref:chartRef})});};export default PortfolioChart;","map":{"version":3,"names":["React","useEffect","useRef","Chart","jsx","_jsx","PortfolioChart","_ref","data","selectedAsset","timeFilter","chartRef","chartInstance","dates","values","length","current","destroy","ctx","getContext","filteredDates","filteredValues","slice","filter","_","i","gradient","createLinearGradient","addColorStop","chartLabel","type","labels","datasets","label","borderColor","backgroundColor","borderWidth","pointRadius","pointHoverRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","tension","fill","options","responsive","maintainAspectRatio","plugins","legend","display","tooltip","mode","intersect","titleColor","bodyColor","padding","displayColors","callbacks","context","concat","parsed","y","toFixed","scales","x","grid","drawBorder","ticks","color","callback","value","interaction","axis","className","children","ref"],"sources":["E:/vestra-main/frontend/src/components/Chart.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport Chart from 'chart.js/auto';\nimport './Chart.css';\n\nconst PortfolioChart = ({ data, selectedAsset, timeFilter }) => {\n  const chartRef = useRef(null);\n  const chartInstance = useRef(null);\n\n  useEffect(() => {\n    if (!data || !data.dates || !data.values || data.dates.length === 0) {\n      return;\n    }\n\n    // Destroy previous chart if it exists\n    if (chartInstance.current) {\n      chartInstance.current.destroy();\n    }\n\n    const ctx = chartRef.current.getContext('2d');\n\n    // Filter data based on time filter\n    let filteredDates = [...data.dates];\n    let filteredValues = [...data.values];\n\n    if (timeFilter === '1h') {\n      // For demo, just take the last 24 points and pretend they're hourly\n      filteredDates = filteredDates.slice(-24);\n      filteredValues = filteredValues.slice(-24);\n    } else if (timeFilter === '3h') {\n      // For demo, take the last 36 points\n      filteredDates = filteredDates.slice(-36);\n      filteredValues = filteredValues.slice(-36);\n    } else if (timeFilter === '1d') {\n      // For demo, take the last 48 points\n      filteredDates = filteredDates.slice(-48);\n      filteredValues = filteredValues.slice(-48);\n    } else if (timeFilter === '1w') {\n      // For demo, take all points but sample every 4th one\n      filteredDates = filteredDates.filter((_, i) => i % 4 === 0);\n      filteredValues = filteredValues.filter((_, i) => i % 4 === 0);\n    }\n    // For 1m, use all data\n\n    // Create gradient for the line\n    const gradient = ctx.createLinearGradient(0, 0, 0, 300);\n    gradient.addColorStop(0, 'rgba(248, 227, 107, 0.5)');\n    gradient.addColorStop(1, 'rgba(248, 227, 107, 0)');\n\n    // Siempre mostrar el balance total del portafolio, ignorando el activo seleccionado\n    const chartLabel = 'Balance Total del Portafolio';\n    \n    // Create the chart\n    chartInstance.current = new Chart(ctx, {\n      type: 'line',\n      data: {\n        labels: filteredDates,\n        datasets: [\n          {\n            label: chartLabel,\n            data: filteredValues,\n            borderColor: '#f8e36b',\n            backgroundColor: gradient,\n            borderWidth: 2,\n            pointRadius: 0,\n            pointHoverRadius: 5,\n            pointHoverBackgroundColor: '#f8e36b',\n            pointHoverBorderColor: '#fff',\n            pointHoverBorderWidth: 2,\n            tension: 0.4,\n            fill: true\n          }\n        ]\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            display: false\n          },\n          tooltip: {\n            mode: 'index',\n            intersect: false,\n            backgroundColor: '#111',\n            titleColor: '#f8e36b',\n            bodyColor: '#fff',\n            borderColor: '#333',\n            borderWidth: 1,\n            padding: 10,\n            displayColors: false,\n            callbacks: {\n              label: function(context) {\n                return `$${context.parsed.y.toFixed(2)}`;\n              }\n            }\n          }\n        },\n        scales: {\n          x: {\n            grid: {\n              display: false,\n              drawBorder: false\n            },\n            ticks: {\n              display: false\n            }\n          },\n          y: {\n            grid: {\n              color: '#222',\n              drawBorder: false\n            },\n            ticks: {\n              color: '#888',\n              padding: 10,\n              callback: function(value) {\n                return value >= 1000 ? `${value/1000}k` : value;\n              }\n            }\n          }\n        },\n        interaction: {\n          mode: 'nearest',\n          axis: 'x',\n          intersect: false\n        }\n      }\n    });\n\n    return () => {\n      if (chartInstance.current) {\n        chartInstance.current.destroy();\n      }\n    };\n  }, [data, selectedAsset, timeFilter]);\n\n  return (\n    <div className=\"chart-wrapper\">\n      <canvas ref={chartRef}></canvas>\n    </div>\n  );\n};\n\nexport default PortfolioChart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}